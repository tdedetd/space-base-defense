"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[804],{66:(e,t,n)=>{n.r(t),n.d(t,{checkIntersection:()=>s,colinearPointWithinSegment:()=>c});var r=a("colinear"),i=a("parallel"),o=a("none");function s(e,t,n,s,c,u,l,h){var p=(h-u)*(n-e)-(l-c)*(s-t),d=(l-c)*(t-u)-(h-u)*(e-c),f=(n-e)*(t-u)-(s-t)*(e-c);if(0==p)return 0==d&&0==f?r:i;var y,g,v=d/p,m=f/p;return v>=0&&v<=1&&m>=0&&m<=1?(y={x:e+v*(n-e),y:t+v*(s-t)},(g=a("intersecting")).point=y,g):o}function a(e){return{type:e}}function c(e,t,n,r,i,o){if(n!=i){if(n<=e&&e<=i)return!0;if(n>=e&&e>=i)return!0}else{if(r<=t&&t<=o)return!0;if(r>=t&&t>=o)return!0}return!1}},75:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModule=void 0;var n=function(){function e(e){this._destroyed=!1,this._rectangle=e}return Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._destroyed=!0},e}();t.BaseModule=n},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;var n=function(){function e(e){this._modules=e}return Object.defineProperty(e.prototype,"modules",{get:function(){return this._modules},enumerable:!1,configurable:!0}),e.prototype.getBorders=function(){var e=99999999,t=99999999,n=0,r=0;return this.modules.forEach((function(i){var o=i.rectangle;e=o.x<e?o.x:e,t=o.y<t?o.y:t;var s=o.x+o.width;n=s>n?s:n;var a=o.y+o.height;r=a>r?a:r})),{x:e,y:t,width:n-e,height:r-t}},e.prototype.getUndestroyedModules=function(){return this._modules.filter((function(e){return!e.destroyed}))},e}();t.Base=n},610:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Cannon=void 0;var i=n(858),o=n(644),s=n(741),a=n(520),c=function(){function e(e){var t=e.rotationRadians,n=e.barrelLength,r=e.position,i=e.projectileOptions,o=e.reloadingMs;this.lastShotTimestamp=0,this._position=r,this._rotationRadians=null!=t?t:(0,s.toRadians)(45),this._barrelLength=n,this._projectileOptions=i,this._reloadingMs=o}return Object.defineProperty(e.prototype,"barrelLength",{get:function(){return this._barrelLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationRadians",{get:function(){return this._rotationRadians},enumerable:!1,configurable:!0}),e.prototype.getReloadingState=function(e){return this.lastShotTimestamp+this._reloadingMs>e?{status:"reloading",progress:(e-this.lastShotTimestamp)/this._reloadingMs}:{status:"ready"}},e.prototype.setRotation=function(e){this._rotationRadians=e},e.prototype.tryToFire=function(e){if("reloading"===this.getReloadingState(e).status)throw new a.FireWhileReloadingCannonError;return this.lastShotTimestamp=e,new i.BlasterProjectile(r(r({},this._projectileOptions),{direction:"fromCenter",position:{radius:0,radians:this._rotationRadians},origin:o.CoordinateSystemConverter.toCartesian({radius:this._barrelLength,radians:this._rotationRadians},this._position)}))},e}();t.Cannon=c},105:function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CannonError=void 0;var i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="CannonError",n}return r(t,e),t}(Error);t.CannonError=i},520:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.FireWhileReloadingCannonError=void 0;var o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="FireWhileReloadingCannonError",n}return i(t,e),t}(n(105).CannonError);t.FireWhileReloadingCannonError=o},822:(e,t)=>{function n(e){var t=e.container,n=e.game,r=e.gameRenderer;t.addEventListener("mousedown",(function(e){0!==e.button||r.pause||(n.fire(),n.activateCannons())}))}function r(e){var t=e.container,n=e.game;t.addEventListener("mouseup",(function(e){0===e.button&&n.deactivateCannons()}))}function i(e){var t=e.container,n=e.gameRenderer;t.addEventListener("mousemove",(function(e){n.setActiveScenePosition(e.offsetX,e.offsetY),n.updateCannonRotation()}))}function o(e){var t=e.gameRenderer;document.addEventListener("visibilitychange",(function(){t.pause=!0}))}function s(e){var t=e.container;e.fullscreenButton.addEventListener("click",(function(){t.requestFullscreen()}))}function a(e){var t=e.gameRenderer,n=e.game;window.addEventListener("keydown",(function(e){["f","а"].includes(e.key.toLowerCase())&&!t.pause&&n.activateCannons(),["d","в"].includes(e.key.toLowerCase())&&t.toggleDisplayDebug(),["p","з"].includes(e.key.toLowerCase())&&(t.togglePause(),t.pause||t.updateCannonRotation())}))}function c(e){var t=e.game;window.addEventListener("keyup",(function(e){["f","а"].includes(e.key.toLowerCase())&&t.deactivateCannons()}))}function u(e){var t=e.gameRenderer;window.addEventListener("resize",(function(){t.updateSceneMeasures()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.initDomEvents=void 0,t.initDomEvents=function(e){[n,r,i,o,s,a,c,u].forEach((function(t){t(e)}))}},699:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHtmlElement=void 0,t.getHtmlElement=function(e){var t=document.querySelector("#".concat(e));if(!t)throw new Error('element with id "'.concat(e,'" not found'));return t}},962:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.EnemyProjectileSpawner=void 0;var i=n(865),o=n(858),s=n(644),a=n(263),c=n(241),u=n(876),l=n(331),h=n(741),p=n(604),d=n(568),f=function(){function e(e,t,n){this.projectileOptions=n,this._borders=null,this._frequency=t,this._targets=e}return Object.defineProperty(e.prototype,"borders",{get:function(){return this._borders},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targets",{get:function(){return this._targets},enumerable:!1,configurable:!0}),e.prototype.getCurrentSpawnFrequency=function(e){return Math.max("number"==typeof this._frequency?this._frequency:this._frequency(e),0)},e.prototype.requestSpawn=function(e,t){if(t<0||!this._borders)return[];var n=1e3/this.getCurrentSpawnFrequency(t),r=Math.floor(e/n);e%n/n>Math.random()&&r++;for(var i=[],o=0;o<r;o++)try{i.push(this.generateProjectile())}catch(e){if(!(e instanceof Error&&"NoIntersectionPointsError"===e.name))throw e}return i},e.prototype.removeTarget=function(e){this._targets=(0,l.removeElementFromArray)(this._targets,e)},e.prototype.setBorders=function(e){if(e.width<0||e.height<0)throw new Error("rectangle has negative sizes (".concat(e.width,"; ").concat(e.height,")"));this.targets.forEach((function(t){if(!(0,p.isRectangleInsideRectangle)(t,e))throw new Error("target is not inside spawn borders. Target: ".concat((0,d.formatRectangle)(t,3)))})),this._borders=e},e.prototype.generateProjectile=function(){if(!this.borders)throw new Error("no borders");var e=this.getTargetPosition(),t=(0,a.getDistance)({x:0,y:0},{x:this.borders.width,y:this.borders.height}),n=(0,h.toRadians)(u.Random.interval(45,145)),l=(0,c.getIntersectionPoints)([e,s.CoordinateSystemConverter.toCartesian({radians:n,radius:t},e)],this.borders);if(0===l.length)throw new i.NoIntersectionPointsError("no intersection points");return new o.BlasterProjectile(r(r({},this.projectileOptions),{origin:e,position:{radians:n,radius:s.CoordinateSystemConverter.toPolar(l[0],e).radius},direction:"toCenter"}))},e.prototype.getTargetPosition=function(){if(this.targets.length){var e=this.targets[u.Random.integer(this.targets.length)];return{x:u.Random.interval(e.x,e.x+e.width),y:u.Random.interval(e.y,e.y+e.height)}}return this._borders?{x:u.Random.interval(this._borders.x,this._borders.x+this._borders.width),y:this._borders.y+1}:{x:0,y:0}},e}();t.EnemyProjectileSpawner=f},865:function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoIntersectionPointsError=void 0;var i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="NoIntersectionPointsError",n}return r(t,e),t}(Error);t.NoIntersectionPointsError=i},930:function(e,t){var n=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.GameEvents=void 0;var r=function(){function e(){this.listeners={}}return e.prototype.dispatch=function(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.forEach((function(e){e(t)}))},e.prototype.listen=function(e,t){var r=this.listeners[e];this.listeners[e]=r?n(n([],r,!0),[t],!1):[t]},e}();t.GameEvents=r},829:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameInterval=void 0;var n=function(){function e(e,t){this.callback=e,this.intervalMs=t,this.msCounter=0}return e.prototype.update=function(e){this.msCounter+=e,this.msCounter/this.intervalMs>=1&&(this.msCounter%=this.intervalMs,this.callback())},e}();t.GameInterval=n},479:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameStatistics=void 0;var n=function(){function e(){this._enemyProjectiles=0,this._hits=0,this._shots=0}return Object.defineProperty(e.prototype,"enemyProjectiles",{get:function(){return this._enemyProjectiles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hits",{get:function(){return this._hits},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shots",{get:function(){return this._shots},enumerable:!1,configurable:!0}),e.prototype.addEnemyProjectiles=function(e){this._enemyProjectiles+=e},e.prototype.addHits=function(e){this._hits+=e},e.prototype.addShots=function(e){this._shots+=e},e}();t.GameStatistics=n},655:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var i=n(830),o=n(75),s=n(610),a=n(962),c=n(930),u=n(479),l=n(219),h=n(730),p=function(){function e(e){var t,n,r,h;this._events=new c.GameEvents,this._timestamp=0,this._allyProjectiles=[],this._enemyProjectiles=[],this._statistics=new u.GameStatistics,this._cannonsAreActive=!1,this._cannons=e.cannons.map((function(e){return new s.Cannon(e)})),this._base=new i.Base(null!==(n=null===(t=e.baseModules)||void 0===t?void 0:t.map((function(e){return new o.BaseModule(e)})))&&void 0!==n?n:[]),this._enemyProjectileSpawner=new a.EnemyProjectileSpawner(this.base.modules.map((function(e){return e.rectangle})),e.enemyProjectile.frequency,e.enemyProjectile.options),this._staticShields=null!==(h=null===(r=e.staticShields)||void 0===r?void 0:r.map((function(e){return new l.StaticShield(e)})))&&void 0!==h?h:[]}return Object.defineProperty(e.prototype,"timestamp",{get:function(){return this._timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allyProjectiles",{get:function(){return this._allyProjectiles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enemyProjectiles",{get:function(){return this._enemyProjectiles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enemyProjectilesSpawner",{get:function(){return this._enemyProjectileSpawner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cannons",{get:function(){return this._cannons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cannonsAreActive",{get:function(){return this._cannonsAreActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"base",{get:function(){return this._base},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"staticShields",{get:function(){return this._staticShields},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentProjectilesSpawnFrequency",{get:function(){return this.enemyProjectilesSpawner.getCurrentSpawnFrequency(this.timestamp)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statistics",{get:function(){return this._statistics},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),e.getBlasterProjectilesInside=function(e,t){var n=e.x,r=e.x+e.width,i=e.y,o=e.y+e.height;return t.filter((function(e){var t=e.getLine();return(0,h.isPointInsideIntervals)(t[0],n,r,i,o)||(0,h.isPointInsideIntervals)(t[1],n,r,i,o)}))},e.moveProjectilesGroup=function(e,t){e.forEach((function(e){e.move(t)}))},e.prototype.activateCannons=function(){this._cannonsAreActive=!0},e.prototype.clearProjectilesOutside=function(t){this._allyProjectiles=e.getBlasterProjectilesInside(t,this._allyProjectiles),this._enemyProjectiles=e.getBlasterProjectilesInside(t,this._enemyProjectiles)},e.prototype.deactivateCannons=function(){this._cannonsAreActive=!1},e.prototype.fire=function(){var e,t=this,n=this._cannons.reduce((function(e,n){try{return r(r([],e,!0),[n.tryToFire(t.timestamp)],!1)}catch(t){if(t instanceof Error&&"FireWhileReloadingCannonError"===t.name)return e;throw t}}),[]);(e=this._allyProjectiles).push.apply(e,n),this.statistics.addShots(n.length?1:0)},e.prototype.update=function(e){this._timestamp+=e,this.moveProjectiles(e),this.requestSpawEnemyProjectiles(e),this.checkProjectilesIntersections(),this.checkStaticShieldsIntersections(),this.checkBaseModuleIntersections(),this._cannonsAreActive&&this.fire()},e.prototype.checkProjectilesIntersections=function(){var e=this,t=[],n=[];this.allyProjectiles.forEach((function(r){e.enemyProjectiles.forEach((function(e){var i=e.getLine();r.intersects(i)&&(t.push(r),n.push(e))}))})),this._allyProjectiles=this._allyProjectiles.filter((function(e){return!t.includes(e)})),this.removeFromEnemyProjectiles(n),this.statistics.addHits(t.length),(t.length||n.length)&&this.events.dispatch("blasterProjectilesIntersect",{projectiles:r(r([],t,!0),n,!0)})},e.prototype.checkStaticShieldsIntersections=function(){var e=this,t=[];this.staticShields.forEach((function(n){t.push.apply(t,e.enemyProjectiles.filter((function(e){return n.getIntersectionPoints(e.getLine()).length>0})))})),this.removeFromEnemyProjectiles(t),t.length&&this.events.dispatch("blasterProjectilesIntersect",{projectiles:t})},e.prototype.checkBaseModuleIntersections=function(){var e=this,t=[],n=this.base.getBorders(),r=!1;this._enemyProjectiles.forEach((function(i){i.intersects(n)&&e.base.getUndestroyedModules().forEach((function(n){i.intersects(n.rectangle)&&(n.destroy(),t.push(i),e.enemyProjectilesSpawner.removeTarget(n.rectangle),r=!0)}))})),r&&this.events.dispatch("destroyModule",void 0),this._enemyProjectiles=this._enemyProjectiles.filter((function(e){return!t.includes(e)}))},e.prototype.moveProjectiles=function(t){e.moveProjectilesGroup(this._allyProjectiles,t),e.moveProjectilesGroup(this._enemyProjectiles,t)},e.prototype.removeFromEnemyProjectiles=function(e){this._enemyProjectiles=this._enemyProjectiles.filter((function(t){return!e.includes(t)}))},e.prototype.requestSpawEnemyProjectiles=function(e){var t,n=this._enemyProjectileSpawner.requestSpawn(e,this._timestamp);n.length&&((t=this._enemyProjectiles).push.apply(t,n),this.statistics.addEnemyProjectiles(n.length))},e}();t.Game=p},857:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(187),o=n(200),s=n(822),a=n(699),c=n(586);document.addEventListener("DOMContentLoaded",(function(e){var t=(0,a.getHtmlElement)("container"),n=(0,a.getHtmlElement)("fullscreen-button"),u=new r.Game(c.levelDefault),l=new i.GameRenderer({effects:(0,a.getHtmlElement)("layer-effects"),mainStatic:(0,a.getHtmlElement)("layer-main-static"),main:(0,a.getHtmlElement)("layer-main")},u,t);l.updateSceneMeasures(),(0,s.initDomEvents)({container:t,game:u,gameRenderer:l,fullscreenButton:n});var h=new o.Tick;h.run(e.timeStamp),h.setGameRenderer(l)}))},586:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.levelDefault=void 0;var r=n(741);t.levelDefault={baseModules:[{x:420,y:20,width:30,height:16},{x:500,y:30,width:30,height:18},{x:580,y:26,width:30,height:16}],cannons:[{barrelLength:30,rotationRadians:(0,r.toRadians)(45),position:{x:100,y:100},reloadingMs:500,projectileOptions:{speed:1e3,color:"#dd8eff",length:50}},{barrelLength:30,rotationRadians:(0,r.toRadians)(135),position:{x:900,y:100},reloadingMs:500,projectileOptions:{speed:1e3,color:"#dd8eff",length:50}}],enemyProjectile:{frequency:1,options:{length:100,speed:100,color:"rgb(0, 255, 0)"}},staticShields:[{position:{x:500,y:-20},xRadius:500,yRadius:220}]}},141:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParticleSystem=void 0;var r=n(537),i=n(876),o=n(59),s=function(){function e(){this._particles=[]}return Object.defineProperty(e.prototype,"particles",{get:function(){return this._particles},enumerable:!1,configurable:!0}),e.prototype.emit=function(e){for(var t,n=[],s=0;s<e.count;s++){var a=new o.Particle({lifetime:"number"==typeof e.lifetime?e.lifetime:i.Random.interval(e.lifetime[0],e.lifetime[1]),origin:"x"in e.spawnPosition?e.spawnPosition:r.getRandomPointBetween.apply(void 0,e.spawnPosition),position:{radians:e.angle+(void 0===e.angleAmplitude?0:i.Random.interval(-e.angleAmplitude,e.angleAmplitude)),radius:0},radius:e.radius,speed:e.speed.average+(e.speed.deviation?i.Random.interval(-e.speed.deviation,e.speed.deviation):0),color:e.color,opacity:e.opacity});n.push(a)}(t=this.particles).push.apply(t,n)},e.prototype.update=function(e){var t=[];this._particles.forEach((function(n){n.move(e),n.isDead()&&t.push(n)})),this._particles=this._particles.filter((function(e){return!t.includes(e)}))},e}();t.ParticleSystem=s},59:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Particle=void 0;var o=n(809),s=n(644),a=function(e){function t(t){var n=e.call(this,t)||this,r=t.radius,i=t.lifetime,o=t.opacity;return n._radius=r,n.lifetime=i,n._opacity=null!=o?o:1,n}return i(t,e),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!1,configurable:!0}),t.prototype.getPosition=function(){return s.CoordinateSystemConverter.toCartesian(this.position,this.origin)},t.prototype.getOpacity=function(){return"number"==typeof this._opacity?this._opacity:this._opacity(this.age)},t.prototype.isDead=function(){return this.age>this.lifetime},t}(o.SceneObject);t.Particle=a},858:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BlasterProjectile=void 0;var o=n(66),s=n(644),a=n(730),c=n(380),u=function(e){function t(t){var n=e.call(this,t)||this;return n._length=t.length,n}return i(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),t.prototype.getLine=function(){var e=this._position.radius+("fromCenter"===this._direction?-this._length:this._length);return[s.CoordinateSystemConverter.toCartesian(this._position,this._origin),s.CoordinateSystemConverter.toCartesian({radians:this._position.radians,radius:"toCenter"===this._direction||e>=0?e:0},this._origin)]},t.prototype.intersects=function(e){return(0,c.isRectangle)(e)?this.intersectsRectangle(e):this.intersectsLine(e)},t.prototype.intersectsLine=function(e){var t=this.getLine();return"intersecting"===(0,o.checkIntersection)(e[0].x,e[0].y,e[1].x,e[1].y,t[0].x,t[0].y,t[1].x,t[1].y).type},t.prototype.intersectsRectangle=function(e){var t=this.getLine(),n=e.x,r=e.y,i=e.x+e.width,o=e.y+e.height;return(0,a.isPointInsideIntervals)(t[0],n,i,r,o)||(0,a.isPointInsideIntervals)(t[0],n,i,r,o)},t}(n(690).Projectile);t.BlasterProjectile=u},690:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Projectile=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.intersects=function(e){throw new Error("Method is not implemented")},t}(n(809).SceneObject);t.Projectile=o},61:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCamera=void 0,t.defaultCamera={position:{x:0,y:0},zoom:1}},187:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameRenderer=void 0;var r=n(417),i=n(644),o=n(449),s=n(155),a=n(253),c=n(58),u=n(829),l=n(232),h=function(){function e(e,t,n){this.container=n,this._pause=!1,this.measures=new r.Measures(3/4,1e3),this.clearInterval=new u.GameInterval((function(){}),1e6),this.activeScenePosition=null,this._game=t,this.layers={effects:new l.EffectsLayerRenderer((0,o.getContext2d)(e.effects),this.game,this.measures),main:new c.GameMainLayerRenderer((0,o.getContext2d)(e.main),this.game,this.measures),mainStatic:new s.GameMainStaticLayerRenderer((0,o.getContext2d)(e.mainStatic),this.game,this.measures)}}return Object.defineProperty(e.prototype,"game",{get:function(){return this._game},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pause",{get:function(){return this._pause},set:function(e){this._pause=e},enumerable:!1,configurable:!0}),e.prototype.render=function(e){var t={activeScenePosition:this.activeScenePosition,msDiff:e,pause:this._pause};this.layers.main.render(t),this.layers.effects.render(t),this.clearInterval.update(e)},e.prototype.toggleDisplayDebug=function(){this.layers.main.displayDebug=!this.layers.main.displayDebug},e.prototype.togglePause=function(){this._pause=!this._pause},e.prototype.setActiveScenePosition=function(e,t){this.activeScenePosition=this.measures.convertPointPxToScenePoint({x:e,y:t})},e.prototype.updateCannonRotation=function(){if(this.activeScenePosition&&!this.pause)for(var e=0,t=this.game.cannons;e<t.length;e++){var n=t[e],r=i.CoordinateSystemConverter.toPolar(this.activeScenePosition,n.position);n.setRotation(r.radians)}},e.prototype.updateSceneMeasures=function(){var e=this;Object.values(this.layers).filter((function(e){return e instanceof a.LayerRenderer})).forEach((function(t){t.updateCanvasSize(e.container.clientWidth,e.container.clientHeight)})),this.measures.update(this.container.clientWidth,this.container.clientHeight);var t=this.measures.getSceneBorders();this.clearInterval=new u.GameInterval((function(){e.game.clearProjectilesOutside(t)}),1e3),this.game.enemyProjectilesSpawner.setBorders(t),this.layers.mainStatic.render()},e}();t.GameRenderer=h},232:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.EffectsLayerRenderer=void 0;var o=n(141),s=n(263),a=n(741),c=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.particleSystem=new o.ParticleSystem,i.game.events.listen("blasterProjectilesIntersect",(function(e){e.projectiles.forEach((function(e){var t=e.getLine(),n=(0,s.getDistance)(t[0],t[1]);i.particleSystem.emit({angle:e.position.radians+("fromCenter"===e.direction?0:Math.PI),angleAmplitude:(0,a.toRadians)(25),color:e.color,count:Math.round(n/10),lifetime:2e3,spawnPosition:t,radius:1,speed:{average:e.getSpeed(),deviation:10},opacity:function(e){return.8*(1-e/2e3)}})}))})),i}return i(t,e),t.prototype.render=function(e){var t=e.pause,n=e.msDiff;t||(this.clearContext(),this.particleSystem.update(n),this.renderParticles())},t.prototype.renderParticles=function(){var e=this;this.particleSystem.particles.filter((function(e){return!e.isDead()})).forEach((function(t){var n=e.measures.convertPointToPx(t.getPosition()),r=e.measures.convertSizeToPx(t.radius);e.ctx.globalAlpha=t.getOpacity(),e.ctx.fillStyle=t.color,e.ctx.beginPath(),e.ctx.ellipse(n.x,n.y,r,r,0,0,2*Math.PI),e.ctx.closePath(),e.ctx.fill()}))},t}(n(253).LayerRenderer);t.EffectsLayerRenderer=c},58:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GameMainLayerRenderer=void 0;var o=n(644),s=n(781),a=n(253),c=n(228),u=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.displayDebug=!0,i.debugRenderer=new s.DebugRenderer(i.ctx,i.measures),i.uiRenderer=new c.UiRenderer(i.ctx,i.measures),i}return i(t,e),t.prototype.render=function(e){var t=e.activeScenePosition,n=e.pause,r=e.msDiff;this.clearContext(),this.renderBlasterProjectiles(this.game.enemyProjectiles),this.renderBlasterProjectiles(this.game.allyProjectiles),this.renderCannons(this.game.cannons),this.uiRenderer.render(this.game),this.displayDebug&&this.debugRenderer.render(this.game,t,n,r)},t.prototype.toggleDisplayDebug=function(){this.displayDebug=!this.displayDebug},t.prototype.renderBlasterProjectiles=function(e){var t=this;e.forEach((function(e){var n=e.getLine(),r=t.measures.convertPointToPx(n[0]),i=t.measures.convertPointToPx(n[1]);t.ctx.strokeStyle=e.color,t.ctx.beginPath(),t.ctx.moveTo(r.x,r.y),t.ctx.lineTo(i.x,i.y),t.ctx.stroke()}))},t.prototype.renderCannons=function(e){var t=this;e.forEach((function(e){var n=o.CoordinateSystemConverter.toCartesian({radians:e.rotationRadians,radius:e.barrelLength},e.position),r=t.measures.convertPointToPx(e.position),i=t.measures.convertPointToPx(n);t.ctx.strokeStyle="#d19c13",t.ctx.beginPath(),t.ctx.moveTo(r.x,r.y),t.ctx.lineTo(i.x,i.y),t.ctx.stroke()}))},t}(a.LayerRenderer);t.GameMainLayerRenderer=u},155:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GameMainStaticLayerRenderer=void 0;var o=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.game.events.listen("destroyModule",(function(){i.render()})),i}return i(t,e),t.prototype.render=function(){this.clearContext(),this.renderBaseModules(this.game.base.modules),this.renderStaticShield()},t.prototype.renderBaseModules=function(e){var t=this,n=this.ctx;e.filter((function(e){return!e.destroyed})).forEach((function(e){n.strokeStyle="#d19c13";var r=t.measures.convertRectangleToPx(e.rectangle);n.strokeRect(r.x,r.y,r.width,r.height)}))},t.prototype.renderStaticShield=function(){var e=this;this.ctx.strokeStyle="#fff",this.game.staticShields.forEach((function(t){var n=e.measures.convertPointToPx(t.position);e.ctx.beginPath(),e.ctx.ellipse(n.x,n.y,e.measures.convertSizeToPx(t.xRadius),e.measures.convertSizeToPx(t.yRadius),0,0,2*Math.PI),e.ctx.closePath(),e.ctx.stroke()}))},t}(n(253).LayerRenderer);t.GameMainStaticLayerRenderer=o},253:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LayerRenderer=void 0;var n=function(){function e(e,t,n){this.ctx=e,this.game=t,this.measures=n}return e.prototype.clearContext=function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},e.prototype.render=function(e){throw new Error("method is not implemented")},e.prototype.updateCanvasSize=function(e,t){this.ctx.canvas.width=e,this.ctx.canvas.height=t},e}();t.LayerRenderer=n},781:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebugRenderer=void 0;var r=n(675),i=n(681),o=function(){function e(e,t){this.ctx=e,this.measures=t,this.fpsMeter=new i.FpsMeter,this.fontSize=14,this.lineSpacing=8,this.hitboxColor="rgba(255, 255, 255, 0.5)",this.tempLineCounter=0,this.fontStyle="".concat(this.fontSize,"px sans-serif")}return e.prototype.render=function(e,t,n,r){this.fpsMeter.registerFrame(r),this.renderSceneBounds(),this.renderBaseHitbox(e.base.getBorders()),e.enemyProjectilesSpawner.borders&&this.renderEnemyProjectileSpawnerBorders(e.enemyProjectilesSpawner.borders),this.renderDebugInfo(e,t,n)},e.prototype.renderBaseHitbox=function(e){this.ctx.strokeStyle=this.hitboxColor;var t=this.measures.convertRectangleToPx(e);this.ctx.strokeRect(t.x,t.y,t.width,t.height)},e.prototype.renderEnemyProjectileSpawnerBorders=function(e){this.ctx.strokeStyle=this.hitboxColor;var t=this.measures.convertRectangleToPx(e);this.ctx.strokeRect(t.x,t.y,t.width,t.height)},e.prototype.renderDebugInfo=function(e,t,n){this.ctx.fillStyle="white",this.ctx.letterSpacing="1px",this.ctx.font=this.fontStyle,this.resetLineCounter();var i=t?(0,r.formatPoint)(t,2):"-";this.renderInfoLine("".concat(this.fpsMeter.getCurrent().toFixed(3)," FPS")),this.skipLine(),this.renderInfoLine("Active position: ".concat(i)),this.renderInfoLine("Time: ".concat((e.timestamp/1e3).toFixed(0),"s")),this.renderInfoLine("Ally projectiles: ".concat(e.allyProjectiles.length)),this.renderInfoLine("Enemy projectiles: ".concat(e.enemyProjectiles.length)),this.renderInfoLine("Paused: ".concat(n)),this.renderInfoLine("Projectiles frequency: ".concat(e.currentProjectilesSpawnFrequency.toFixed(2)," per second")),this.renderInfoLine(["Actual projectiles frequency:",String((e.statistics.enemyProjectiles/e.timestamp*1e3).toFixed(2)),"per second"].join(" ")),this.skipLine(),this.renderInfoLine("------ Game statistics ------"),this.renderInfoLine("Shots: ".concat(e.statistics.shots)),this.renderInfoLine("Hits: ".concat(e.statistics.hits)),this.renderInfoLine("Enemy projectiles: ".concat(e.statistics.enemyProjectiles))},e.prototype.renderSceneBounds=function(){this.ctx.strokeStyle=this.hitboxColor;var e=this.measures.convertRectangleToPx({x:0,y:0,width:this.measures.sceneWidth,height:this.measures.sceneHeight});this.ctx.strokeRect(e.x,e.y,e.width,e.height)},e.prototype.renderInfoLine=function(e){this.tempLineCounter++,this.ctx.fillStyle="white",this.ctx.letterSpacing="1px",this.ctx.font=this.fontStyle,this.ctx.fillText(e,10,(this.fontSize+this.lineSpacing)*this.tempLineCounter)},e.prototype.resetLineCounter=function(){this.tempLineCounter=0},e.prototype.skipLine=function(){this.tempLineCounter++},e}();t.DebugRenderer=o},681:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FpsMeter=void 0;var n=function(){function e(){this.valuesLimit=30,this.valuesMs=[]}return e.prototype.registerFrame=function(e){this.valuesMs.push(e),this.valuesMs.length>this.valuesLimit&&this.valuesMs.shift()},e.prototype.getCurrent=function(){var e=0,t=0;return this.valuesMs.forEach((function(n){e+=n,t++})),0===e?0:t/e*1e3},e}();t.FpsMeter=n},417:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Measures=void 0;var r=n(61),i=function(){function e(e,t){this.aspectRatio=e,this._camera=r.defaultCamera,this._sceneWidth=0,this._sceneHeight=0,this._sceneWidthPx=0,this._sceneHeightPx=0,this._sceneOriginPx={x:0,y:0},this._sceneYStartPx=0,this.updateSceneSizes(t)}return Object.defineProperty(e.prototype,"sceneWidth",{get:function(){return this._sceneWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sceneHeight",{get:function(){return this._sceneHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sceneYStartPx",{get:function(){return this._sceneYStartPx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sceneOriginPx",{get:function(){return this._sceneOriginPx},enumerable:!1,configurable:!0}),e.prototype.convertSizeToPx=function(e){return this._sceneWidthPx/this.sceneWidth*this._camera.zoom*e},e.prototype.convertPointToPx=function(e){return{x:this.sceneOriginPx.x+(e.x-this._camera.position.x)/this.sceneWidth*this._sceneWidthPx*this._camera.zoom,y:this.sceneYStartPx-(e.y-this._camera.position.y)/this.sceneHeight*this._sceneHeightPx*this._camera.zoom}},e.prototype.convertRectangleToPx=function(e){var t=this.convertPointToPx({x:e.x,y:e.y}),n=this._sceneHeightPx/this.sceneHeight*e.height;return{x:t.x,y:t.y-n*this._camera.zoom,width:this._sceneWidthPx/this.sceneWidth*e.width*this._camera.zoom,height:n*this._camera.zoom}},e.prototype.convertPointPxToScenePoint=function(e){return{x:(e.x-this._sceneOriginPx.x)/this._sceneWidthPx*this._sceneWidth/this._camera.zoom+this._camera.position.x,y:(this._sceneYStartPx-e.y)/this._sceneHeightPx*this._sceneHeight/this._camera.zoom+this._camera.position.y}},e.prototype.getSceneBorders=function(){var e=-this.sceneOriginPx.x*(this.sceneWidth/this._sceneWidthPx),t=-this.sceneOriginPx.y*(this.sceneHeight/this._sceneHeightPx);return{x:e,y:t,width:this.sceneWidth+2*-e,height:this.sceneHeight+2*-t}},e.prototype.update=function(e,t){this.updateSceneBorders(e,t)},e.prototype.updateSceneBorders=function(e,t){e*this.aspectRatio<t?(this._sceneWidthPx=e,this._sceneHeightPx=Math.round(e*this.aspectRatio),this._sceneOriginPx={x:0,y:Math.round(t/2-this._sceneHeightPx/2)}):(this._sceneWidthPx=Math.round(t/this.aspectRatio),this._sceneHeightPx=t,this._sceneOriginPx={x:Math.round(e/2-this._sceneWidthPx/2),y:0}),this._sceneYStartPx=this._sceneOriginPx.y+this._sceneHeightPx},e.prototype.updateSceneSizes=function(e){this._sceneWidth=e,this._sceneHeight=e*this.aspectRatio},e}();t.Measures=i},228:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UiRenderer=void 0;var n=function(){function e(e,t){this.ctx=e,this.measures=t,this.reloadingScaleOptions={outerWidth:100,outerHeight:10,padding:2,ySpacing:20,color:"rgba(255, 255, 255, 0.25)"}}return e.prototype.render=function(e){this.renderCannonsReloadingScales(e.cannons,e.timestamp)},e.prototype.renderCannonsReloadingScales=function(e,t){var n=this,r=this.reloadingScaleOptions,i=r.outerWidth,o=r.outerHeight,s=r.ySpacing,a=r.padding;this.ctx.strokeStyle=this.reloadingScaleOptions.color,this.ctx.fillStyle=this.reloadingScaleOptions.color,e.forEach((function(e){var r=e.getReloadingState(t);if("reloading"===r.status){var c=n.measures.convertPointToPx(e.position);n.ctx.strokeRect(c.x-i/2,c.y+s,i,o),n.ctx.fillRect(c.x-i/2+a,c.y+s+a,(i-2*a)*r.progress,o-2*a)}}))},e}();t.UiRenderer=n},449:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getContext2d=void 0,t.getContext2d=function(e){var t=e.getContext("2d");if(!t)throw new Error('Cannot get context 2d. id: "'.concat(e.id,'"'));return t}},809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SceneObject=void 0;var n=function(){function e(e){var t=e.color,n=e.direction,r=e.origin,i=e.position,o=e.speed;this.age=0,this._color=null!=t?t:"#fff",this._direction=null!=n?n:"fromCenter",this._origin=r,this._speed=o,this._position=i}return Object.defineProperty(e.prototype,"color",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),e.prototype.move=function(e){this.age+=e;var t=this.getSpeed()*(e/1e3);switch(this._direction){case"fromCenter":this._position.radius+=t;break;case"toCenter":this._position.radius-=t;break;default:throw new Error("this._direction has incorrect value: ".concat(this._direction))}},e.prototype.getSpeed=function(){return"number"==typeof this.speed?this.speed:this.speed(this.age)},e}();t.SceneObject=n},219:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StaticShield=void 0;var r=n(739),i=function(){function e(e){"radius"in e?(this._xRadius=e.radius,this._yRadius=e.radius):(this._xRadius=e.xRadius,this._yRadius=e.yRadius),this._position=e.position}return Object.defineProperty(e.prototype,"xRadius",{get:function(){return this._xRadius},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yRadius",{get:function(){return this._yRadius},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),e.prototype.getIntersectionPoints=function(e){var t=this;if(0===this.xRadius||0===this.yRadius||e[0].x===e[1].x&&e[0].y===e[1].y)return[];var n=this.xRadius<0?this.xRadius:-this.xRadius,i=this.yRadius<0?this.yRadius:-this.yRadius,o=e[0].x-this.position.x,s=e[0].y-this.position.y,a=e[1].x-this.position.x,c=e[1].y-this.position.y,u=(a-o)*(a-o)/n/n+(c-s)*(c-s)/i/i,l=2*o*(a-o)/n/n+2*s*(c-s)/i/i,h=o*o/n/n+s*s/i/i-1;return(0,r.getQuadraticEquationSolution)(u,l,h).filter((function(e){return e>=0&&e<=1})).map((function(e){return{x:o+(a-o)*e+t.position.x,y:s+(c-s)*e+t.position.y}}))},e}();t.StaticShield=i},200:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tick=void 0;var n=function(){function e(){this.gameRenderer=null}return e.prototype.run=function(e){var t=this,n=e,r=function(e){var i=e-n;n=e,t.gameRenderer&&(t.gameRenderer.pause||t.gameRenderer.game.update(i),t.gameRenderer.render(i)),requestAnimationFrame(r)};requestAnimationFrame(r)},e.prototype.resetGameRenderer=function(){this.gameRenderer=null},e.prototype.setGameRenderer=function(e){this.gameRenderer=e},e}();t.Tick=n},644:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoordinateSystemConverter=void 0;var r=n(263),i={x:0,y:0},o=function(){function e(){}return e.toCartesian=function(e,t){return void 0===t&&(t=i),{x:e.radius*Math.cos(e.radians)+t.x,y:e.radius*Math.sin(e.radians)+t.y}},e.toPolar=function(e,t){void 0===t&&(t=i);var n=e.x-t.x,o=e.y-t.y,s=(0,r.getDistance)(e,t);return{radians:0===n?o>0?Math.PI/2:o<0?3*Math.PI/2:0:n>0?o>=0?Math.atan(o/n):Math.atan(o/n)+2*Math.PI:Math.atan(o/n)+Math.PI,radius:s}},e}();t.CoordinateSystemConverter=o},675:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatPoint=void 0,t.formatPoint=function(e,t){return void 0===t&&(t=0),"(".concat(e.x.toFixed(t),"; ").concat(e.y.toFixed(t),")")}},568:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatRectangle=void 0;var r=n(675);t.formatRectangle=function(e,t){return void 0===t&&(t=0),"[".concat((0,r.formatPoint)({x:e.x,y:e.y},t),", ").concat((0,r.formatPoint)({x:e.x+e.width,y:e.y+e.height}),"]")}},263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDistance=void 0,t.getDistance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},241:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getIntersectionPoints=void 0;var i=n(66);t.getIntersectionPoints=function(e,t){var n={x:t.x,y:t.y},o={x:t.x+t.width,y:t.y},s={x:t.x+t.width,y:t.y+t.height},a={x:t.x,y:t.y+t.height};return[(0,i.checkIntersection)(e[0].x,e[0].y,e[1].x,e[1].y,n.x,n.y,o.x,o.y),(0,i.checkIntersection)(e[0].x,e[0].y,e[1].x,e[1].y,o.x,o.y,s.x,s.y),(0,i.checkIntersection)(e[0].x,e[0].y,e[1].x,e[1].y,s.x,s.y,a.x,a.y),(0,i.checkIntersection)(e[0].x,e[0].y,e[1].x,e[1].y,n.x,n.y,a.x,a.y)].reduce((function(e,t){return"intersecting"===t.type?r(r([],e,!0),[t.point],!1):e}),[])}},739:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getQuadraticEquationSolution=void 0,t.getQuadraticEquationSolution=function(e,t,n){var r=t*t-4*e*n;return 0===r?[-t/2/e]:r>0?[(-t+Math.sqrt(r))/2/e,(-t-Math.sqrt(r))/2/e]:[]}},537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomPointBetween=void 0,t.getRandomPointBetween=function(e,t){var n=Math.random();return{x:(t.x-e.x)*n+e.x,y:(t.y-e.y)*n+e.y}}},730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInsideIntervals=void 0,t.isPointInsideIntervals=function(e,t,n,r,i){return e.x>=t&&e.x<=n&&e.y>=r&&e.y<=i}},604:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRectangleInsideRectangle=void 0;var r=n(730);t.isRectangleInsideRectangle=function(e,t){var n=t.x,i=t.x+t.width,o=t.y,s=t.y+t.height;return(0,r.isPointInsideIntervals)({x:e.x,y:e.y},n,i,o,s)&&(0,r.isPointInsideIntervals)({x:e.x+e.width,y:e.y+e.height},n,i,o,s)}},876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Random=void 0;var n=function(){function e(){}return e.integer=function(t){return Math.floor(e.to(t))},e.interval=function(e,t){return Math.random()*(t-e)+e},e.to=function(t){return e.interval(0,t)},e}();t.Random=n},331:function(e,t){var n=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromArray=void 0,t.removeElementFromArray=function(e,t){var r=e.indexOf(t);return-1===r?e:n(n([],e.slice(0,r),!0),e.slice(r+1,e.length),!0)}},741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRadians=void 0,t.toRadians=function(e){return e*Math.PI/180}},380:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRectangle=void 0,t.isRectangle=function(e){return"x"in e&&"y"in e&&"width"in e&&"height"in e}}}]);